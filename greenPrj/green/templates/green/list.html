<!-- list.html -->
{% load static %} {% include 'green/header.html' %}

<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GreenShield</title>

    <link rel="stylesheet" href="{% static 'css/list.css' %}" />
  </head>

  <body>
    <!-- 맞춤형 계획표 -->
    <section>
      <h1 class="page-name">맞춤형 계획표</h1>
      <div class="container">
        <!-- 투두리스트 -->
        <section class="todo-list">
          <h1 class="page-name">해야 할 일 리스트</h1>

          <div class="clip"></div>
          <div class="circle-left"></div>
          <div class="circle-right"></div>
          {% load custom_filters %}
          <form method="POST" class="todo-list">
            {% csrf_token %}
            <ul class="todo-list">
              {% for question in to_do_list %}
              <!-- id는 for와 같게 -->
              <li class="list">
                <input
                  type="checkbox"
                  name="to_do_{{ question.id }}"
                  value="1"
                  {%
                  if
                  completed_list|get_item:question.id
                  %}
                  checked
                  {%
                  endif
                  %}
                  class="list-checkbox"
                  id="to_do_{{ question.id }}"
                />
                <label for="to_do_{{ question.id }}" class="list-checkbox">
                  <img
                    class="list-checkbox"
                    src="{% static 'img/iconCheckbox_todoPlan_50x50.png' %}"
                  />
                </label>
                <label for="list1" class="list-content">
                  {{ question.to_do }}
                </label>
              </li>
              {% endfor %}
            </ul>
            <button type="submit" class="todo-submit">제출하기</button>
          </form>
        </section>

        <!-- 분석 결과 그래프 -->
        <section class="chart">
          <!-- 막대 그래프 -->
          <div class="chart">
            <h4 class="chart-name">Weekly Overview</h4>
            <p class="chart-date">Aug 1 - Aug 7</p>
            <ul class="bar1">
              {% for day, count in completion_by_day.items %}
              <li></li>
              {% endfor %}
              <!-- <li style="height: 100px; background-color: #5a976b"></li>
              <li style="height: 86px; background-color: #bae3b3"></li> -->
            </ul>
            <ul class="bar1-x-axis">
              {% for day, count in completion_by_day.items %}
              <li>{{ day }}</li>
              {% endfor %}
              <!-- <li>M</li>
              <li>T</li>
              <li>W</li>
              <li>T</li>
              <li>F</li>
              <li>S</li>
              <li>S</li> -->
            </ul>
            <div class="line"></div>
            <div class="state">
              <div class="icon-smile">
                <img
                  class="icon-smile"
                  src="{% static 'img/iconSmile_todoPlan_33x33.png' %}./"
                  alt="img"
                />
              </div>
              <div>
                <h4 class="state">You're doing good!</h4>
                <p class="state">어제보다 좋아졌어요</p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- 
    <h2>Weekly Overview</h2>
    <table>
      <tbody>
        {% for day, count in completion_by_day.items %}
        <tr>
          <td>{{ day }}</td>
          <td>{{ count }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    -->

    <h2>Monthly Overview</h2>
    <table>
      <thead>
        <tr>
          <th>Month</th>
          <th>Completion</th>
        </tr>
      </thead>
      <tbody>
        {% for month, count in completion_by_month.items %}
        <tr>
          <td>{{ month }}</td>
          <td>{{ count }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <script>
      // Django 템플릿 엔진을 사용하여 JavaScript 변수에 데이터 할당
      var completionData = {{ completion_by_day|safe }};
    </script>
    <script src="{% static 'js/list.js' %}"></script>
  </body>
</html>
